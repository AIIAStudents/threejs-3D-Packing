<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>3D Bin Packing System</title>
    <link rel="stylesheet" href="./src/css/style.css">
    <style>
      body {
        margin: 0;
        overflow: hidden;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
    </style>
    <link 
      rel="stylesheet" 
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" 
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" 
      crossorigin="anonymous" 
      referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.9/dat.gui.min.js"></script>
  </head>
  <body>
    <!-- Icon toolbar at the top -->
    <div id="icon-toolbar" class="hidden">
      <div class="icon-wrapper" id="createIsocahedron" data-type="icosahedron">
       <svg class="circle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
          <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z" />
       </svg>
       <span class="tooltip">createIcosahedron</span>
     </div>
    </div>

    <div id="app">
      <!-- 左側工具列 -->
      <div id="left-sidebar">
        <div class="sidebar-header">
          <h2>物件管理</h2>
        </div>
        
        <!-- 功能按鈕區域 -->
        <div class="action-buttons">
          <button id="add-item-btn" class="action-btn">
            <i class="fas fa-plus"></i>
             Add Item
          </button>
          <button id="execute-packing-btn" class="action-btn">
            <i class="fas fa-play"></i>
             Execution 3D Packing
          </button>
          <a href="./src/html/test-pages.html" class="action-btn" style="text-decoration: none; justify-content: center;">
            <i class="fas fa-flask"></i>
             Test Pages
          </a>
        </div>

        <!-- 物件列表區域 -->
        <div class="objects-section">
          <div id="objects-list" class="objects-list">
            <!-- 物件項目將在這裡動態生成 -->
          </div>
        </div>
      </div>

      <!-- 右側3D場景 -->
      <div id="right-canvas">
        <canvas id="canvas"></canvas>
        
        <!-- 物件屬性工具列 (預設隱藏) -->
        <div id="item-toolbar" class="toolbar-panel" style="display: none;">
          <div class="toolbar-header">
            <h3>物件屬性工具列</h3>
            <button class="close-btn" id="close-item-toolbar">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="toolbar-content">
                         <div class="toolbar-section">
               <h4>基本屬性</h4>
               <div class="input-group">
                 <label>物件名稱:</label>
                 <input type="text" id="item-name" value="Box">
               </div>
               <div class="input-group">
                 <label>物件類型:</label>
                 <select id="item-type">
                   <option value="cube">Cube (立方體)</option>
                   <option value="sphere">Sphere (球體)</option>
                   <option value="cylinder">Cylinder (圓柱體)</option>
                   <option value="icosahedron">Icosahedron (二十面體)</option>
                   <option value="irregular">Irregular (不規則形狀)</option>
                 </select>
               </div>
               
             </div>
             
             <div class="toolbar-section" id="cube-params" style="display: none;">
               <h4>立方體參數</h4>
               <div class="input-group">
                 <label>寬度:</label>
                 <input type="number" id="cube-width" value="15" min="1" max="50" step="1">
               </div>
               <div class="input-group">
                 <label>高度:</label>
                 <input type="number" id="cube-height" value="15" min="1" max="50" step="1">
               </div>
               <div class="input-group">
                 <label>深度:</label>
                 <input type="number" id="cube-depth" value="15" min="1" max="50" step="1">
               </div>
             </div>
             
             <div class="toolbar-section" id="sphere-params" style="display: none;">
               <h4>球體參數</h4>
               <div class="input-group">
                 <label>半徑:</label>
                 <input type="number" id="sphere-radius" value="10" min="1" max="20" step="0.5">
               </div>
               <div class="input-group">
                 <label>寬度分段:</label>
                 <input type="number" id="sphere-widthSegments" value="16" min="3" max="64" step="1">
               </div>
               <div class="input-group">
                 <label>高度分段:</label>
                 <input type="number" id="sphere-heightSegments" value="16" min="2" max="32" step="1">
               </div>
             </div>
             
             <div class="toolbar-section" id="cylinder-params" style="display: none;">
               <h4>圓柱體參數</h4>
               <div class="input-group">
                 <label>頂部半徑:</label>
                 <input type="number" id="cylinder-radiusTop" value="5" min="0" max="20" step="0.5">
               </div>
               <div class="input-group">
                 <label>底部半徑:</label>
                 <input type="number" id="cylinder-radiusBottom" value="5" min="0" max="20" step="0.5">
               </div>
               <div class="input-group">
                 <label>高度:</label>
                 <input type="number" id="cylinder-height" value="10" min="1" max="50" step="1">
               </div>
               <div class="input-group">
                 <label>徑向分段:</label>
                 <input type="number" id="cylinder-radialSegments" value="8" min="3" max="64" step="1">
               </div>
               <div class="input-group">
                 <label>高度分段:</label>
                 <input type="number" id="cylinder-heightSegments" value="1" min="1" max="32" step="1">
               </div>
             </div>
             
             <div class="toolbar-section" id="icosahedron-params" style="display: none;">
               <h4>二十面體參數</h4>
               <div class="input-group">
                 <label>半徑:</label>
                 <input type="number" id="icosahedron-radius" value="10" min="1" max="20" step="0.5">
               </div>
               <div class="input-group">
                 <label>細節:</label>
                 <input type="number" id="icosahedron-detail" value="0" min="0" max="5" step="1">
               </div>
             </div>
             
             <div class="toolbar-section" id="irregular-params" style="display: none;">
               <h4>不規則形狀參數</h4>
               <div class="input-group">
                 <label>寬度:</label>
                 <input type="number" id="irregular-width" value="10" min="1" max="50" step="1">
               </div>
               <div class="input-group">
                 <label>高度:</label>
                 <input type="number" id="irregular-height" value="15" min="1" max="50" step="1">
               </div>
               <div class="input-group">
                 <label>深度:</label>
                 <input type="number" id="irregular-depth" value="8" min="1" max="50" step="1">
               </div>
             </div>

                         <div class="toolbar-section">
               <h4>材質</h4>
               <div class="input-group">
                 <label>顏色:</label>
                 <input type="color" id="item-color" value="#ff6b6b">
               </div>
               <div class="input-group">
                 <label>透明度:</label>
                 <input type="range" id="item-opacity" min="0" max="1" step="0.1" value="0.9">
                 <span id="opacity-value">0.9</span>
               </div>
             </div>
             
             <div class="toolbar-section">
               <button id="delete-item-btn" class="cancel-btn">刪除物件</button>
             </div>
            
            <button id="create-item-btn" class="create-btn">創建物件</button>
          </div>
        </div>

        <!-- 打包進度面板 -->
        <div id="packing-panel" class="floating-panel" style="display: none;">
          <div class="panel-header">
            <h3>3D Bin Packing</h3>
            <button class="close-btn" id="close-packing-panel">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="panel-content">
            <div id="packing-progress" class="progress-container">
              <div class="progress-status status-pending">準備中...</div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 0%"></div>
              </div>
              <div class="progress-text">0%</div>
            </div>
            <div id="packing-results">
              <p><strong>體積利用率:</strong> <span id="utilization-text">-</span></p>
              <p><strong>執行時間:</strong> <span id="execution-time-text">-</span></p>
            </div>
            <button id="cancel-packing-btn" class="cancel-btn">取消打包</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="./src/js/main.js"></script>
  </body>
</html>


