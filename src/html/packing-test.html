<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Bin Packing - æ‰“åŒ…æ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #ffd700;
        }
        
        .test-button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .test-button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .result-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success { background-color: #4CAF50; }
        .status-error { background-color: #f44336; }
        .status-warning { background-color: #ff9800; }
        .status-info { background-color: #2196F3; }
        
        .back-link {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            background: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª 3D Bin Packing æ‰“åŒ…æ¸¬è©¦</h1>
        
        <div class="test-section">
            <h3>ğŸ“¡ å¾Œç«¯æœå‹™å™¨æ¸¬è©¦</h3>
            <p>æ¸¬è©¦å¾Œç«¯APIæœå‹™å™¨æ˜¯å¦æ­£å¸¸é‹è¡Œ</p>
            <button class="test-button" onclick="testBackend()">æ¸¬è©¦å¾Œç«¯é€£æ¥</button>
            <div id="backend-result" class="result-display" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ­ æ¨¡æ“¬æ‰“åŒ…æ¸¬è©¦</h3>
            <p>æ¸¬è©¦å‰ç«¯æ¨¡æ“¬æ‰“åŒ…åŠŸèƒ½</p>
            <button class="test-button" onclick="testSimulation()">æ¸¬è©¦æ¨¡æ“¬æ‰“åŒ…</button>
            <div id="simulation-result" class="result-display" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ”§ åŠŸèƒ½è¨ºæ–·</h3>
            <p>æª¢æŸ¥æ‰“åŒ…åŠŸèƒ½çš„å„å€‹çµ„ä»¶</p>
            <button class="test-button" onclick="runDiagnostics()">é‹è¡Œè¨ºæ–·</button>
            <div id="diagnostics-result" class="result-display" style="display: none;"></div>
        </div>
        
        <a href="../index.html" class="back-link">â† è¿”å›ä¸»é </a>
    </div>

    <script>
        // æ¸¬è©¦å¾Œç«¯é€£æ¥
        async function testBackend() {
            const resultDiv = document.getElementById('backend-result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = 'ğŸ”„ æ¸¬è©¦ä¸­...';
            
            try {
                const response = await fetch('http://localhost:8889/health');
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.innerHTML = `<span class="status-indicator status-success"></span>âœ… å¾Œç«¯æœå‹™å™¨æ­£å¸¸é‹è¡Œ\n\néŸ¿æ‡‰æ•¸æ“š:\n${JSON.stringify(data, null, 2)}`;
                } else {
                    resultDiv.innerHTML = `<span class="status-indicator status-error"></span>âŒ å¾Œç«¯æœå‹™å™¨éŸ¿æ‡‰éŒ¯èª¤: ${response.status}`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="status-indicator status-error"></span>âŒ ç„¡æ³•é€£æ¥åˆ°å¾Œç«¯æœå‹™å™¨\n\néŒ¯èª¤ä¿¡æ¯: ${error.message}\n\nå»ºè­°:\n1. æª¢æŸ¥å¾Œç«¯æœå‹™å™¨æ˜¯å¦å•Ÿå‹•\n2. ç¢ºèªç«¯å£8889æ˜¯å¦æ­£ç¢º\n3. æª¢æŸ¥é˜²ç«ç‰†è¨­ç½®`;
            }
        }
        
        // æ¸¬è©¦æ¨¡æ“¬æ‰“åŒ…
        function testSimulation() {
            const resultDiv = document.getElementById('simulation-result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = 'ğŸ”„ æ¸¬è©¦æ¨¡æ“¬æ‰“åŒ…...';
            
            // æ¨¡æ“¬æ‰“åŒ…éç¨‹
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                resultDiv.innerHTML = `ğŸ”„ æ¨¡æ“¬æ‰“åŒ…é€²åº¦: ${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // æ¨¡æ“¬çµæœ
                    const mockResult = {
                        packed_objects: [
                            { uuid: 'test-1', position: { x: 0, y: 0, z: 0 }, dimensions: { x: 10, y: 10, z: 10 } },
                            { uuid: 'test-2', position: { x: 15, y: 0, z: 0 }, dimensions: { x: 8, y: 8, z: 8 } }
                        ],
                        volume_utilization: 12.5,
                        execution_time: 2.5
                    };
                    
                    resultDiv.innerHTML = `<span class="status-indicator status-success"></span>âœ… æ¨¡æ“¬æ‰“åŒ…å®Œæˆ!\n\næ‰“åŒ…çµæœ:\n${JSON.stringify(mockResult, null, 2)}\n\né«”ç©åˆ©ç”¨ç‡: ${mockResult.volume_utilization}%\nåŸ·è¡Œæ™‚é–“: ${mockResult.execution_time}ç§’`;
                }
            }, 200);
        }
        
        // é‹è¡Œè¨ºæ–·
        function runDiagnostics() {
            const resultDiv = document.getElementById('diagnostics-result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = 'ğŸ” é‹è¡Œè¨ºæ–·ä¸­...';
            
            const diagnostics = [];
            
            // æª¢æŸ¥ç€è¦½å™¨åŠŸèƒ½
            if (typeof fetch !== 'undefined') {
                diagnostics.push('âœ… Fetch API å¯ç”¨');
            } else {
                diagnostics.push('âŒ Fetch API ä¸å¯ç”¨');
            }
            
            if (typeof Promise !== 'undefined') {
                diagnostics.push('âœ… Promise æ”¯æŒ');
            } else {
                diagnostics.push('âŒ Promise ä¸æ”¯æŒ');
            }
            
            // æª¢æŸ¥ç¶²çµ¡é€£æ¥
            if (navigator.onLine) {
                diagnostics.push('âœ… ç¶²çµ¡é€£æ¥æ­£å¸¸');
            } else {
                diagnostics.push('âŒ ç¶²çµ¡é€£æ¥é›¢ç·š');
            }
            
            // æª¢æŸ¥æœ¬åœ°å­˜å„²
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                diagnostics.push('âœ… æœ¬åœ°å­˜å„²å¯ç”¨');
            } catch (e) {
                diagnostics.push('âŒ æœ¬åœ°å­˜å„²ä¸å¯ç”¨');
            }
            
            // æª¢æŸ¥æ§åˆ¶å°
            if (console && console.log) {
                diagnostics.push('âœ… æ§åˆ¶å°åŠŸèƒ½æ­£å¸¸');
            } else {
                diagnostics.push('âŒ æ§åˆ¶å°åŠŸèƒ½ç•°å¸¸');
            }
            
            resultDiv.innerHTML = `<span class="status-indicator status-info"></span>ğŸ” è¨ºæ–·å®Œæˆ\n\n${diagnostics.join('\n')}\n\nå»ºè­°:\n1. ç¢ºä¿ä½¿ç”¨ç¾ä»£ç€è¦½å™¨\n2. æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°æ˜¯å¦æœ‰éŒ¯èª¤\n3. ç¢ºèªJavaScriptå·²å•Ÿç”¨`;
        }
    </script>
</body>
</html>
