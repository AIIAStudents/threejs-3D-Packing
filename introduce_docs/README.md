# 3D Bin Packing 應用程式完整功能說明

## 🎯 應用程式概述

這是一個基於 Three.js 的 3D 二維裝箱系統，使用 **BLF+SA** 算法來優化空間利用率。用戶可以創建各種 3D 物件，系統會自動計算最佳的裝箱方案，達到空間最大化的目標。

## 🏠 主應用程式 (index.html)

### 主要功能區域

#### 1. 左側控制面板
- **物件創建區域**：創建各種 3D 物件
- **打包控制區域**：執行 3D 打包算法
- **進度顯示區域**：顯示打包進度和結果

#### 2. 右側 3D 場景
- **3D 視窗**：顯示 3D 物件和容器
- **互動控制**：滑鼠拖拽、縮放、旋轉視角

### 使用方法

#### 步驟 1：創建物件
1. 點擊左側的 **"Add Item"** 按鈕
2. 選擇物件類型（立方體、球體、圓柱體等）
3. 調整物件參數（尺寸、顏色、透明度）
4. 點擊 **"Create Item"** 創建物件

#### 步驟 2：執行打包
1. 確保場景中有物件
2. 點擊 **"Execution 3D Packing"** 按鈕
3. 系統會自動計算最佳裝箱方案
4. 觀察進度條和結果顯示

#### 步驟 3：查看結果
- **體積利用率**：顯示已使用空間的百分比
- **執行時間**：算法執行所需的時間
- **物件位置**：物件會自動移動到最佳位置

## 🧪 測試頁面功能說明

### 1. 打包功能測試 (packing-test.html)
**作用**：測試後端 API 連接和打包功能
**使用方法**：
- 點擊 "測試後端連接" 檢查服務器狀態
- 點擊 "測試模擬打包" 運行前端模擬算法
- 點擊 "運行診斷" 檢查系統組件狀態

### 2. 打包調試頁面 (debug-packing.html)
**作用**：詳細調試打包過程和物件管理
**使用方法**：
- 點擊 "測試物件創建" 驗證物件創建功能
- 點擊 "測試模擬打包" 運行打包算法
- 點擊 "測試場景更新" 檢查 3D 渲染
- 查看實時日誌輸出

### 3. 修復測試頁面 (test-fix.html)
**作用**：驗證修復後的打包功能
**使用方法**：
- 點擊 "檢查全局變量" 確認系統組件
- 點擊 "測試場景渲染" 驗證 3D 渲染
- 點擊 "測試打包功能" 檢查物件管理

### 4. 打包視覺測試 (packing-visual-test.html)
**作用**：專門測試物件位置更新顯示
**使用方法**：
- 點擊 "檢查基礎功能" 驗證系統完整性
- 點擊 "創建測試物件" 添加測試物件
- 點擊 "測試模擬打包" 執行打包並觀察物件移動
- 點擊 "測試場景渲染" 檢查渲染狀態

### 5. 簡單測試 (simple-test.html)
**作用**：基本 3D 場景和物理引擎測試
**使用方法**：
- 測試 Three.js 基本功能
- 驗證物理引擎運作
- 檢查物件互動

### 6. 場景測試 (test-scene.html)
**作用**：測試 3D 場景渲染和物件管理
**使用方法**：
- 測試場景初始化
- 驗證物件添加和移除
- 檢查相機和控制器

## 🔧 技術架構說明

### 核心組件

#### 1. Three.js 渲染引擎
- **場景管理**：管理 3D 物件和環境
- **相機控制**：視角控制和投影
- **渲染器**：將 3D 場景轉換為 2D 圖像

#### 2. 物理引擎 (Cannon.js)
- **碰撞檢測**：物件間的物理互動
- **重力模擬**：真實的物理效果
- **物件運動**：基於物理的物件移動

#### 3. 打包算法 (BLF+SA)
- **BLF (Bottom-Left-Fill)**：從左下角開始填充
- **SA (Simulated Annealing)**：模擬退火優化
- **空間優化**：最大化容器利用率

### 數據流程

1. **物件創建** → 添加到 3D 場景
2. **打包請求** → 發送到後端 API
3. **算法計算** → 後端執行 BLF+SA 算法
4. **結果返回** → 前端接收打包結果
5. **場景更新** → 物件移動到新位置
6. **渲染顯示** → 更新 3D 場景

## 📊 使用場景

### 1. 物流倉儲
- 貨物裝箱優化
- 集裝箱空間利用
- 倉庫貨架規劃

### 2. 製造業
- 零件包裝設計
- 產品運輸優化
- 材料切割規劃

### 3. 建築設計
- 空間佈局優化
- 傢俱擺放設計
- 房間功能規劃

## 🚀 進階功能

### 1. 自定義算法
- 支持不同的打包策略
- 可調整優化參數
- 多目標優化

### 2. 實時互動
- 拖拽調整物件位置
- 即時碰撞檢測
- 動態場景更新

### 3. 數據導出
- 打包結果保存
- 3D 模型導出
- 優化報告生成

## ⚠️ 常見問題

### 1. 物件不顯示
- 檢查瀏覽器控制台錯誤
- 確認 Three.js 庫已加載
- 驗證物件創建參數

### 2. 打包失敗
- 檢查後端服務器狀態
- 確認物件數量不為零
- 驗證容器尺寸設置

### 3. 物件位置不更新
- 檢查全局變量設置
- 確認渲染循環正常
- 驗證物件 UUID 匹配

## 🔍 調試技巧

### 1. 控制台日誌
- 查看詳細的執行日誌
- 檢查錯誤和警告信息
- 監控性能指標

### 2. 測試頁面
- 使用專門的測試頁面
- 逐步驗證各個功能
- 隔離問題組件

### 3. 瀏覽器工具
- 使用開發者工具檢查
- 監控網絡請求
- 檢查記憶體使用

## 📚 相關文檔

- [Three.js 官方文檔](https://threejs.org/docs/)
- [Cannon.js 物理引擎](https://schteppe.github.io/cannon.js/)
- [3D Bin Packing 算法](https://en.wikipedia.org/wiki/Bin_packing_problem)

## 🆘 技術支持

如果遇到問題，請：
1. 檢查瀏覽器控制台錯誤信息
2. 使用測試頁面進行診斷
3. 查看相關日誌輸出
4. 聯繫技術支持團隊

---

**版本**：v1.0  
**更新日期**：2025年8月  
**技術棧**：Three.js + Cannon.js + BLF+SA 算法
